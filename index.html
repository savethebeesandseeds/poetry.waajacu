<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>        
        body {
            background-color: #000000;
            color: #A9A9A9;
            font-family: 'OCR A Std', monospace;
            font-size: 12px;
        }
        article {
            background-color: #000000;
            color: #d3aa60;
            font-family: 'OCR A Std', monospace;
            font-size: 12px;
        }
        #tabindex, #tablanguage, #tabcontent {
            background-color: #000000;
            color: #ffffff;
        }
        .light {
            background-color: #000000;
            color: #ffffff;
        }
        .gray {
            background-color: #000000;
            color: #A9A9A9;
        }
        .gold {
            background-color: #000000;
            color: #d3aa60;
        }
        .link {
            color: #d3aa60;
            text-decoration: none; 
            background-color: none;
            text-decoration-color: #d3aa60;
        }
        latex-js {
            display: inline-block;
            width: 100%;
            border: 1px solid red;
            margin-right: 2em;
            background-color: #ffffff;
            color: #000000;
        }
    </style>
    <script type="module">
        import latexjs from "https://cdn.jsdelivr.net/npm/latex.js/dist/latex.component.esm.js"
        customElements.define('latex-js', latexjs)
    </script>
    <script type='text/javascript'>
        function getPageContents(callback,url,params) {
            http=new XMLHttpRequest();
            if(params!=null) {
                http.open('POST', url, true);
                http.setRequestHeader('Content-type', 'application/');
            } else {
                http.open('GET', url, true);
            }
            http.onreadystatechange = function() {
                if(http.readyState == 4 && http.status == 200) {
                    callback(http.responseText);
                }
            }
            http.send(params);
        }
    </script> <!-- var textFromFile = (window.URL || window.webkitURL || {}).createObjectURL || function(){}; -->
    <script type='text/javascript'>
        var poems_url = './poems/filesList.txt';
        var filesList = [];
        getPageContents(function(result) {
            filesList = result.split('\n');
            filesList  = filesList.filter(function (el) {
                return el != '';
            });
        }, poems_url, null)
    </script>
    <script type='text/javascript'>
        function displayIndex(local) {
            var clocal = "";
            var contentNode = document.getElementById('tablistindex');
            while (contentNode.firstChild) {
                contentNode.removeChild(contentNode.firstChild);
            }
            filesList.forEach(file=>{
                if(file.includes('./')) {
                    clocal = file;
                } else if(clocal.includes(local) && file.includes('.pdf')) {
                    fileName = file.split('.')[0];
                    fileExt = file.split('.')[1];
                    newelement_li = document.createElement('li');
                    newelement_li.id = "ID_"+fileName;
                    newelement_li_a = document.createElement('a');
                    newelement_li_a.classList.add('link');
                    aux_href = "javascript:displayPdfContent('./poems/"+local+"/"+file+"')";
                    newelement_li_a.setAttribute("href", aux_href);
                    newelement_li_a.title = "TITLE_"+fileName;
                    newelement_li_a.innerHTML = fileName;
                    newelement_li.appendChild(newelement_li_a);
                    contentNode.appendChild(newelement_li);
                }
            })
            if(document.getElementById('tablistindex').children.length<1) {
                newelement = document.createElement('li');
                newelement.classList.add('link');
                newelement.innerHTML = "Not poems found for language "+local;
                contentNode.appendChild(newelement);
            }
        }
    </script>
    <script type='text/javascript'>
        function displayTexContent(tex_url) {
            contentNode = document.getElementById('tabcontent');
            while (contentNode.firstChild) {
                contentNode.removeChild(contentNode.firstChild);
            }
            getPageContents(function(result) {
                newelement_latex = document.createElement('latex-js');
                newelement_latex.setAttribute("baseURL", "https://cdn.jsdelivr.net/npm/latex.js@0.11.1/dist/");
                newelement_latex.innerHTML = result.toString();
                contentNode.appendChild(newelement_latex);
                console.log(result.toString());
            }, tex_url, null)
        }
        function displayPdfContent(pdf_url) {
            contentNode = document.getElementById('tabcontent');
            while (contentNode.firstChild) {
                contentNode.removeChild(contentNode.firstChild);
            }
            newelement_latex = document.createElement('embed');
            newelement_latex.setAttribute("src", pdf_url);
            contentNode.appendChild(newelement_latex);
        }
    </script>
    <script type='text/javascript'>
        function activateTab(mainid, li_id, divid, tabid) {
            var mainDiv = document.getElementById(mainid);
            var li = document.getElementById(li_id);
            var tabDiv = document.getElementById(divid);
            var mainTab = document.getElementById(tabid);
            for (var i = 0; i < mainDiv.childNodes.length; i++) {
                var node = mainDiv.childNodes[i];
                if (node.nodeType == 1) {
                    node.style.background = (node == li) ? '#555555' : '#d3aa60;';
                }
            }
            for (var i = 0; i < tabDiv.childNodes.length; i++) {
                var node = tabDiv.childNodes[i];
                if (node.nodeType == 1) {
                    node.style.display = (node == mainTab) ? 'block' : 'none';
                }
            }
        }
    </script> <!-- javascript:activateTab('tablistindex','addprop','tabcontent','addprop_tab') -->
    <script type="text/javascript">
        var clicks = 0;
        function highClick() {
            clicks += 1;
            document.getElementById("clicks").innerHTML = clicks;
        };
        function lowClick() {
            clicks -= 1;
            document.getElementById("clicks").innerHTML = clicks;
        };
    </script>
</head>
<body>
    <body>
        <article>
            Waajacu poetry is a Blog.
        </article>
        <button type="button" onClick="highClick()">wish luck</button>
        <button type="button" onClick="lowClick()">decline</button>
        <p>lUCKS: <a id="clicks">0</a></p>
        <p class="light">
            LANG:
        </p>
        <div id="tablanguage">
            <ul id="tablistlanguage">
                <li id="spanishTab"><a  class="link" href="javascript:displayIndex('es')" title="">Spanish</a></li>
                <li id="englishTab"><a  class="link" href="javascript:displayIndex('en')" title="">English</a></li>
            </ul>
        </div> <!-- End of tablanguage -->
        <p class="light">
            INDEX:
        </p>
        <div id="tabindex">
            <ul id="tablistindex">
                <li id="addprop"><a  class="link" href="javascript:activateTab('tablistindex','addprop','tabcontent','addprop_tab')" title="">One</a></li>
                <li id="savedprop"><a  class="link" href="javascript:activateTab('tablistindex','savedprop','tabcontent','savedprop_tab')" title="">Saved Property</a></li>
                <li id="inbox"><a  class="link" href="javascript:activateTab('tablistindex','inbox','tabcontent','inbox_tab')" title="">Inbox</a></li>
                <li id="profile"><a  class="link" href="javascript:activateTab('tablistindex','profile','tabcontent','profile_tab')" title="">Update Profile</a></li>
            </ul>
        </div> <!-- End of tabindex -->
        <p class="light">
            CONTENT:
        </p>
        <div id="tabcontent" class="maintab">
            <p class="gray">
                select language.
            </p>
            <div id="addprop_tab" style="display: none">
                <p><a href="#" title="Click to add property">Add your property to NPLH</a></p>
            </div> <!-- End of addprop_tab -->
            <div id="savedprop_tab" style="display: none">
                <p>Browse your saved properties</p>
            </div> <!-- End of savedprop_tab -->
            <div id="inbox_tab" style="display: none">
                <p>inbox</p>
            </div> <!-- End of inbox_tab -->
            <div id="profile_tab" style="display: none">
                <p>
                    <ul>
                        <a href="javascript:activateTab('tablist','profile','profile_subtab','tab1')" title="">Español</a>
                        <a href="javascript:activateTab('tablist','profile','profile_subtab','tab2')" title="">English</a>
                        <a href="javascript:activateTab('tablist','profile','profile_subtab','tab3')" title="">Waajacu</a>
                    </ul>
                </p>
                <div id="profile_subtab" class="subtab">
                    <div id="tab1" style="display: block">
                        <p>Español</p>
                    </div> <!-- End of tab1 -->
                    <div id="tab2" style="display: none">
                        <p>English</p>
                    </div> <!-- End of tab2 -->
                    <div id="tab3" style="display: none">
                        <p>Waajacu</p>
                    </div> <!-- End of tab3 -->
                </div>
            </div> <!-- End of profile_tab -->
        </div> <!-- End of tabcontent -->
    </body>
</body> 